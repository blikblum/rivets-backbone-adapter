!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.rivets=t():e.rivets=t()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},r=n(i(1)),s=n(i(3)),o=i(2),a=o.OPTIONS,c=o.EXTENSIONS,u=n(i(7)),h=n(i(8)),l=n(i(6));r.binders=h,r.adapters["."]=u,r.bind=function(e,t,i){var n={};t=t||{},i=i||{},c.forEach(function(e){n[e]=Object.create(null),i[e]&&Object.keys(i[e]).forEach(function(t){n[e][t]=i[e][t]}),Object.keys(r[e]).forEach(function(t){n[e][t]||(n[e][t]=r[e][t])})}),a.forEach(function(e){var t=i[e];n[e]=null!=t?t:r[e]}),n.starBinders=Object.keys(n.binders).filter(function(e){return e.indexOf("*")>0}),l.updateOptions(n);var o=new s(e,t,n);return o.bind(),o},r.init=function(e,t){var i=void 0===arguments[2]?{}:arguments[2];t||(t=document.createElement("div"));var e=r.components[e];t.innerHTML=e.template.call(r,t);var n=e.initialize.call(r,t,i),s=r.bind(t,n);return s.bind(),s},e.exports=r},function(e,t,i){"use strict";var n=i(2),r=(n.OPTIONS,n.EXTENSIONS),s=Object.defineProperties({binders:{},components:{},formatters:{},adapters:{},_prefix:"rv",_fullPrefix:"rv-",templateDelimiters:["{","}"],rootInterface:".",preloadData:!0,handler:function(e,t,i){this.call(e,t,i.view.models)},fallbackBinder:function(e,t){null!=t?e.setAttribute(this.type,t):e.removeAttribute(this.type)},configure:function(e){var t=this;e&&Object.keys(e).forEach(function(i){var n=e[i];r.indexOf(i)>-1?Object.keys(n).forEach(function(e){t[i][e]=n[e]}):t[i]=n})}},{prefix:{get:function(){return this._prefix},set:function(e){this._prefix=e,this._fullPrefix=e+"-"},configurable:!0,enumerable:!0}});e.exports=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=["prefix","templateDelimiters","rootInterface","preloadData","handler"];t.OPTIONS=i;var n=["binders","formatters","components","adapters"];t.EXTENSIONS=n},function(e,t,i){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var i in t){var n=t[i];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(e,t)}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=n(i(1)),a=i(4),c=a.Binding,u=a.ComponentBinding,h=i(5).parseTemplate,l={routine:function(e,t){e.data=null!=t?t:""}},f=function(e,t){var i=!1;if(3===t.nodeType){var n=h(t.data,o.templateDelimiters);if(n){for(var r=0;r<n.length;r++){var s=n[r],a=document.createTextNode(s.value);t.parentNode.insertBefore(a,t),1===s.type&&e.buildBinding(a,null,s.value,l,null)}t.parentNode.removeChild(t)}i=!0}else 1===t.nodeType&&(i=e.traverse(t));if(!i)for(var r=0;r<t.childNodes.length;r++)f(e,t.childNodes[r])},d=function(e,t){var i=e.binder?e.binder.priority||0:0,n=t.binder?t.binder.priority||0:0;return n-i},p=function(e){return e.trim()},v=function(){function e(t,i,n){s(this,e),t.jquery||t instanceof Array?this.els=t:this.els=[t],this.models=i,this.options=n,this.build()}return r(e,{buildBinding:{value:function(e,t,i,n,r){var s=i.match(/((?:'[^']*')*(?:(?:[^\|']*(?:'[^']*')+[^\|']*)+|[^\|]+))|^$/g).map(p),o=s.shift().split("<").map(p),a=o.shift(),u=o.shift(),h={formatters:s};u&&(h.dependencies=u.split(/\s+/)),this.bindings.push(new c(this,e,t,a,n,r,h))}},build:{value:function(){this.bindings=[];var e=this.els,t=void 0,i=void 0;for(t=0,i=e.length;t<i;t++)f(this,e[t]);this.bindings.sort(d)}},traverse:{value:function(e){for(var t,i,n,r,s=o._fullPrefix,a="SCRIPT"===e.nodeName||"STYLE"===e.nodeName,c=e.attributes,h=[],l=this.options.starBinders,f=0,d=c.length;f<d;f++){var p=c[f];if(0===p.name.indexOf(s)){if(t=p.name.slice(s.length),i=this.options.binders[t],r=void 0,!i)for(var v=0;v<l.length;v++)if(n=l[v],t.slice(0,n.length-1)===n.slice(0,-1)){i=this.options.binders[n],r=t.slice(n.length-1);break}if(i||(i=o.fallbackBinder),i.block)return this.buildBinding(e,t,p.value,i,r),!0;h.push({attr:p,binder:i,type:t,arg:r})}}for(var f=0;f<h.length;f++){var b=h[f];this.buildBinding(e,b.type,b.attr.value,b.binder,b.arg)}if(!a){var m=e.nodeName.toLowerCase();this.options.components[m]&&!e._bound&&(this.bindings.push(new u(this,e,m)),a=!0)}return a}},bind:{value:function(){this.bindings.forEach(function(e){e.bind()})}},unbind:{value:function(){this.bindings.forEach(function(e){e.unbind()})}},sync:{value:function(){this.bindings.forEach(function(e){e.sync()})}},publish:{value:function(){this.bindings.forEach(function(e){e.binder&&e.binder.publishes&&e.publish()})}},update:{value:function(){var e=this,t=void 0===arguments[0]?{}:arguments[0];Object.keys(t).forEach(function(i){e.models[i]=t[i]}),this.bindings.forEach(function(e){e.update&&e.update(t)})}}}),e}();e.exports=v},function(e,t,i){"use strict";function n(e){var t=[];return"checkbox"===e.type?e.checked:"select-multiple"===e.type?(e.options.forEach(function(e){e.selected&&t.push(e.value)}),t):e.value}var r=function(e){return e&&e.__esModule?e["default"]:e},s=function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)},o=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(){function e(e,t){for(var i in t){var n=t[i];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(e,t)}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(t,"__esModule",{value:!0});var u=r(i(1)),h=i(5).parseType,l=i(2),f=l.EXTENSIONS,d=l.OPTIONS,p=r(i(6)),v=t.Binding=function(){function e(t,i,n,r,s,o,a){c(this,e),this.view=t,this.el=i,this.type=n,this.keypath=r,this.options=a,this.dependencies=[],this.formatterObservers={},this.model=void 0,this.binder=s,this.arg=o}return a(e,{observe:{value:function(e,t){return new p(e,t,this)}},parseTarget:{value:function(){if(this.keypath){var e=h(this.keypath);0===e.type?this.value=e.value:(this.observer=this.observe(this.view.models,this.keypath),this.model=this.observer.target)}else this.value=void 0}},parseFormatterArguments:{value:function(e,t){var i=this;return e.map(h).map(function(e,n){var r=e.type,s=e.value;if(0===r)return s;i.formatterObservers[t]||(i.formatterObservers[t]={});var o=i.formatterObservers[t][n];return o||(o=i.observe(i.view.models,s),i.formatterObservers[t][n]=o),o.value()})}},formattedValue:{value:function(e){var t=this;return this.options.formatters.forEach(function(i,n){var r=i.match(/[^\s']+|'([^']|'[^\s])*'|"([^"]|"[^\s])*"/g),o=r.shift(),a=t.view.options.formatters[o],c=t.parseFormatterArguments(r,n);a&&a.read instanceof Function?e=a.read.apply(a,[e].concat(s(c))):a instanceof Function&&(e=a.apply(void 0,[e].concat(s(c))))}),e}},eventHandler:{value:function(e){var t=this,i=t.view.options.handler;return function(n){i.call(e,this,n,t)}}},set:{value:function(e){e=e instanceof Function&&!this.binder["function"]?this.formattedValue(e.call(this.model)):this.formattedValue(e);var t=this.binder.routine||this.binder;t instanceof Function&&t.call(this,this.el,e)}},sync:{value:function(){var e=this;if(this.observer){if(this.model!==this.observer.target){var t=this.options.dependencies;this.dependencies.forEach(function(e){e.unobserve()}),this.dependencies=[],this.model=this.observer.target,this.model&&t&&t.length&&t.forEach(function(t){var i=e.observe(e.model,t);e.dependencies.push(i)})}this.set(this.observer.value())}else this.set(this.value)}},publish:{value:function(){var e,t,i=this;this.observer&&(e=this.getValue(this.el),t=this.options.formatters.length-1,this.options.formatters.slice(0).reverse().forEach(function(n,r){var o=t-r,a=n.split(/\s+/),c=a.shift(),u=i.view.options.formatters[c],h=i.parseFormatterArguments(a,o);u&&u.publish&&(e=u.publish.apply(u,[e].concat(s(h))))}),this.observer.setValue(e))}},bind:{value:function(){var e=this;this.parseTarget(),this.binder.hasOwnProperty("bind")&&this.binder.bind.call(this,this.el),this.model&&this.options.dependencies&&this.options.dependencies.forEach(function(t){var i=e.observe(e.model,t);e.dependencies.push(i)}),this.view.options.preloadData&&this.sync()}},unbind:{value:function(){var e=this;this.binder.unbind&&this.binder.unbind.call(this,this.el),this.observer&&this.observer.unobserve(),this.dependencies.forEach(function(e){e.unobserve()}),this.dependencies=[],Object.keys(this.formatterObservers).forEach(function(t){var i=e.formatterObservers[t];Object.keys(i).forEach(function(e){i[e].unobserve()})}),this.formatterObservers={}}},update:{value:function(){var e=void 0===arguments[0]?{}:arguments[0];this.observer&&(this.model=this.observer.target),this.binder.update&&this.binder.update.call(this,e)}},getValue:{value:function(e){return this.binder&&this.binder.getValue?this.binder.getValue.call(this,e):n(e)}}}),e}();t.ComponentBinding=function(e){function t(e,i,n){c(this,t),this.view=e,this.el=i,this.type=n,this.component=e.options.components[this.type],this["static"]={},this.observers={},this.upstreamObservers={};for(var r=u._fullPrefix,s=0,o=i.attributes.length;s<o;s++){var a=i.attributes[s];if(0!==a.name.indexOf(r)){var h=this.camelCase(a.name),l=this.component["static"];l&&l.indexOf(h)>-1?this["static"][h]=a.value:this.observers[h]=a.value}}}return o(t,e),a(t,{sync:{value:function(){}},update:{value:function(){}},publish:{value:function(){}},locals:{value:function(){var e=this,t={};return Object.keys(this["static"]).forEach(function(i){t[i]=e["static"][i]}),Object.keys(this.observers).forEach(function(i){t[i]=e.observers[i].value()}),t}},camelCase:{value:function(e){return e.replace(/-([a-z])/g,function(e){e[1].toUpperCase()})}},bind:{value:function(){var e=this,t={};if(this.bound||(Object.keys(this.observers).forEach(function(t){var i=e.observers[t];e.observers[t]=e.observe(e.view.models,i,function(t){return function(){e.componentView.models[t]=e.observers[t].value()}}.call(e,t))}),this.bound=!0),this.componentView)this.componentView.bind();else{this.el.innerHTML=this.component.template.call(this);var i=this.component.initialize.call(this,this.el,this.locals());this.el._bound=!0,f.forEach(function(i){t[i]={},e.component[i]&&Object.keys(e.component[i]).forEach(function(n){t[i][n]=e.component[i][n]}),Object.keys(e.view.options[i]).forEach(function(n){t[i][n]&&(t[i][n]=e.view[i][n])})}),d.forEach(function(i){null!=e.component[i]?t[i]=e.component[i]:t[i]=e.view[i]}),this.componentView=u.bind(Array.prototype.slice.call(this.el.childNodes),i,t),Object.keys(this.observers).forEach(function(t){var i=e.observers[t],n=e.componentView.models,r=e.observe(n,t,function(t,i){return function(){i.setValue(e.componentView.models[t])}}.call(e,t,i));e.upstreamObservers[t]=r})}}},unbind:{value:function(){var e=this;Object.keys(this.upstreamObservers).forEach(function(t){e.upstreamObservers[t].unobserve()}),Object.keys(this.observers).forEach(function(t){e.observers[t].unobserve()}),this.componentView&&this.componentView.unbind.call(this)}}}),t}(v)},function(e,t){"use strict";function i(e){var t=r,i=e;return/^'.*'$|^".*"$/.test(e)?i=e.slice(1,-1):"true"===e?i=!0:"false"===e?i=!1:"null"===e?i=null:"undefined"===e?i=void 0:isNaN(e)?t=s:i=Number(e),{type:t,value:i}}function n(e,t){for(var i,n=e.length,r=0,s=0,c=t[0],u=t[1];s<n;){if(r=e.indexOf(c,s),r<0){i&&i.push({type:o,value:e.slice(s)});break}if(i||(i=[]),r>0&&s<r&&i.push({type:o,value:e.slice(s,r)}),s=r+c.length,r=e.indexOf(u,s),r<0){var h=e.slice(s-u.length),l=i[i.length-1];l&&l.type===o?l.value+=h:i.push({type:o,value:h});break}var f=e.slice(s,r).trim();i.push({type:a,value:f}),s=r+u.length}return i}t.parseType=i,t.parseTemplate=n,Object.defineProperty(t,"__esModule",{value:!0});var r=0,s=1,o=0,a=1},function(e,t){"use strict";function i(e){return"object"==typeof e&&null!==e}function n(e){throw new Error("[Observer] "+e)}function r(e,t,n){this.keypath=t,this.callback=n,this.objectPath=[],this.parse(),this.obj=this.getRootObject(e),i(this.target=this.realize())&&this.set(!0,this.key,this.target,this.callback)}var s,o,a;r.updateOptions=function(e){s=e.adapters,o=Object.keys(s),a=e.rootInterface},r.tokenize=function(e,t){var i,n,r=[],s={i:t,path:""};for(i=0;i<e.length;i++)n=e.charAt(i),~o.indexOf(n)?(r.push(s),s={i:n,path:""}):s.path+=n;return r.push(s),r},r.prototype.parse=function(){var e,t;o.length||n("Must define at least one adapter interface."),~o.indexOf(this.keypath[0])?(t=this.keypath[0],e=this.keypath.substr(1)):(t=a,e=this.keypath),this.tokens=r.tokenize(e,t),this.key=this.tokens.pop()},r.prototype.realize=function(){for(var e,t,n=this.obj,r=!1,s=0;s<this.tokens.length;s++)t=this.tokens[s],i(n)?("undefined"!=typeof this.objectPath[s]?n!==(e=this.objectPath[s])&&(this.set(!1,t,e,this),this.set(!0,t,n,this),this.objectPath[s]=n):(this.set(!0,t,n,this),this.objectPath[s]=n),n=this.get(t,n)):(r===!1&&(r=s),(e=this.objectPath[s])&&this.set(!1,t,e,this));return r!==!1&&this.objectPath.splice(r),n},r.prototype.sync=function(){var e,t,n;(e=this.realize())!==this.target?(i(this.target)&&this.set(!1,this.key,this.target,this.callback),i(e)&&this.set(!0,this.key,e,this.callback),t=this.value(),this.target=e,n=this.value(),(n!==t||n instanceof Function)&&this.callback.sync()):e instanceof Array&&this.callback.sync()},r.prototype.value=function(){if(i(this.target))return this.get(this.key,this.target)},r.prototype.setValue=function(e){i(this.target)&&s[this.key.i].set(this.target,this.key.path,e)},r.prototype.get=function(e,t){return s[e.i].get(t,e.path)},r.prototype.set=function(e,t,i,n){var r=e?"observe":"unobserve";s[t.i][r](i,t.path,n)},r.prototype.unobserve=function(){for(var e,t,n=0;n<this.tokens.length;n++)t=this.tokens[n],(e=this.objectPath[n])&&this.set(!1,t,e,this);i(this.target)&&this.set(!1,this.key,this.target,this.callback)},r.prototype.getRootObject=function(e){var t,i;if(!e.$parent)return e;for(t=this.tokens.length?this.tokens[0].path:this.key.path,i=e;i.$parent&&void 0===i[t];)i=i.$parent;return i},e.exports=r},function(e,t){"use strict";var i=["push","pop","shift","unshift","sort","reverse","splice"],n={counter:0,weakmap:{},weakReference:function(e){if(!e.hasOwnProperty("__rv")){var t=this.counter++;Object.defineProperty(e,"__rv",{value:t})}return this.weakmap[e.__rv]||(this.weakmap[e.__rv]={callbacks:{}}),this.weakmap[e.__rv]},cleanupWeakReference:function(e,t){Object.keys(e.callbacks).length||e.pointers&&Object.keys(e.pointers).length||delete this.weakmap[t]},stubFunction:function(e,t){var i=e[t],n=this.weakReference(e),r=this.weakmap;e[t]=function(){for(var t=arguments.length,s=Array(t),o=0;o<t;o++)s[o]=arguments[o];var a=i.apply(e,s);return Object.keys(n.pointers).forEach(function(e){var t=n.pointers[e];r[e]&&r[e].callbacks[t]instanceof Array&&r[e].callbacks[t].forEach(function(e){e.sync()})}),a}},observeMutations:function(e,t,n){var r=this;if(e instanceof Array){var s=this.weakReference(e);s.pointers||(s.pointers={},i.forEach(function(t){r.stubFunction(e,t)})),s.pointers[t]||(s.pointers[t]=[]),s.pointers[t].indexOf(n)===-1&&s.pointers[t].push(n)}},unobserveMutations:function(e,t,i){if(e instanceof Array&&null!=e.__rv){var n=this.weakmap[e.__rv];if(n){var r=n.pointers[t];if(r){var s=r.indexOf(i);s>-1&&r.splice(s,1),r.length||delete n.pointers[t],this.cleanupWeakReference(n,e.__rv)}}}},observe:function(e,t,i){var n,r=this,s=this.weakReference(e).callbacks;if(!s[t]){s[t]=[];var o=Object.getOwnPropertyDescriptor(e,t);o&&(o.get||o.set||!o.configurable)||(n=e[t],Object.defineProperty(e,t,{enumerable:!0,get:function(){return n},set:function(i){if(i!==n){r.unobserveMutations(n,e.__rv,t),n=i;var s=r.weakmap[e.__rv];if(s){var o=s.callbacks[t];o&&o.forEach(function(e){e.sync()}),r.observeMutations(i,e.__rv,t)}}}}))}s[t].indexOf(i)===-1&&s[t].push(i),this.observeMutations(e[t],e.__rv,t)},unobserve:function(e,t,i){var n=this.weakmap[e.__rv];if(n){var r=n.callbacks[t];if(r){var s=r.indexOf(i);s>-1&&(r.splice(s,1),r.length||(delete n.callbacks[t],this.unobserveMutations(e[t],e.__rv,t))),this.cleanupWeakReference(n,e.__rv)}}},get:function(e,t){return e[t]},set:function(e,t,i){e[t]=i}};e.exports=n},function(e,t,i){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},r=n(i(1)),s=n(i(3)),o=function(e){return null!=e?e.toString():void 0},a=function(e,t){for(var i=0;i<e;i++)t()},c={"on-*":{"function":!0,priority:1e3,unbind:function(e){this.handler&&e.addEventListener(this.arg,this.handler)},routine:function(e,t){this.handler&&e.removeEventListener(this.arg,this.handler),this.handler=this.eventHandler(t),e.addEventListener(this.arg,this.handler)}},"each-*":{block:!0,priority:4e3,bind:function(e){if(this.marker)this.iterated.forEach(function(e){e.bind()});else{var t=r._fullPrefix+this.type;this.marker=document.createComment(" rivets: "+this.type+" "),this.iterated=[],e.removeAttribute(t),e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e)}},unbind:function(e){this.iterated&&this.iterated.forEach(function(e){e.unbind()})},routine:function(e,t){var i=this,n=this.arg,t=t||[],r=e.getAttribute("index-property")||"$index";this.iterated.length>t.length&&a(this.iterated.length-t.length,function(){var e=i.iterated.pop();e.unbind(),i.marker.parentNode.removeChild(e.els[0])}),t.forEach(function(t,o){var a={$parent:i.view.models};if(a[r]=o,a[n]=t,i.iterated[o])i.iterated[o].models[n]!==t&&i.iterated[o].update(a);else{var c=i.marker;i.iterated.length&&(c=i.iterated[i.iterated.length-1].els[0]);var u=e.cloneNode(!0),h=new s(u,a,i.view.options);h.bind(),i.iterated.push(h),i.marker.parentNode.insertBefore(u,c.nextSibling)}}),"OPTION"===e.nodeName&&this.view.bindings.forEach(function(e){e.el===i.marker.parentNode&&"value"===e.type&&e.sync()})},update:function(e){var t=this,i={};Object.keys(e).forEach(function(n){n!==t.arg&&(i[n]=e[n])}),this.iterated.forEach(function(e){e.update(i)})}},"class-*":function(e,t){var i=" "+e.className+" ";!t==i.indexOf(" "+this.arg+" ")>-1&&(t?e.className=""+e.className+" "+this.arg:e.className=i.replace(" "+this.arg+" "," ").trim())},text:function(e,t){e.textContent=null!=t?t:""},html:function(e,t){e.innerHTML=null!=t?t:""},show:function(e,t){e.style.display=t?"":"none"},hide:function(e,t){e.style.display=t?"none":""},enabled:function(e,t){e.disabled=!t},disabled:function(e,t){e.disabled=!!t},checked:{publishes:!0,priority:2e3,bind:function(e){var t=this;this.callback||(this.callback=function(){t.publish()}),e.addEventListener("change",this.callback)},unbind:function(e){e.removeEventListener("change",this.callback)},routine:function(e,t){"radio"===e.type?e.checked=o(e.value)===o(t):e.checked=!!t}},unchecked:{publishes:!0,priority:2e3,bind:function(e){var t=this;this.callback||(this.callback=function(){t.publish()}),e.addEventListener("change",this.callback)},unbind:function(e){e.removeEventListener("change",this.callback)},routine:function(e,t){"radio"===e.type?e.checked=o(e.value)!==o(t):e.checked=!t}},value:{publishes:!0,priority:3e3,bind:function(e){if(this.isRadio="INPUT"===e.tagName&&"radio"===e.type,!this.isRadio){this.event=e.getAttribute("event-name")||("SELECT"===e.tagName?"change":"input");var t=this;this.callback||(this.callback=function(){t.publish()}),e.addEventListener(this.event,this.callback)}},unbind:function(e){this.isRadio||e.removeEventListener(this.event,this.callback)},routine:function(e,t){if(this.isRadio)e.setAttribute("value",t);else if("select-multiple"===e.type){if(t instanceof Array)for(var i=0;i<e.length;i++){var n=e[i];n.selected=t.indexOf(n.value)>-1}}else o(t)!==o(e.value)&&(e.value=null!=t?t:"")}},"if":{block:!0,priority:4e3,bind:function(e){if(!this.marker){var t=r._fullPrefix+this.type,i=e.getAttribute(t);this.marker=document.createComment(" rivets: "+this.type+" "+i+" "),this.bound=!1,e.removeAttribute(t),e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e)}},unbind:function(){this.nested&&(this.nested.unbind(),this.bound=!1)},routine:function(e,t){!!t==!this.bound&&(t?(this.nested?this.nested.bind():(this.nested=new s(e,this.view.models,this.view.options),this.nested.bind()),this.marker.parentNode.insertBefore(e,this.marker.nextSibling),this.bound=!0):(e.parentNode.removeChild(e),this.nested.unbind(),this.bound=!1))},update:function(e){this.nested&&this.nested.update(e)}},unless:{block:!0,priority:4e3,bind:function(e){r.binders["if"].bind.call(this,e)},unbind:function(){r.binders["if"].unbind.call(this)},routine:function(e,t){r.binders["if"].routine.call(this,e,!t)},update:function(e){r.binders["if"].update.call(this,e)}}};e.exports=c}])});